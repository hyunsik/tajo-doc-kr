

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>질의하기 &mdash; Apache Tajo 0.8.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Apache Tajo 0.8.0 documentation" href="../index.html"/>
        <link rel="up" title="SQL 언어 (Tajo 질의 언어)" href="../sql_language.html"/>
        <link rel="next" title="SQL 수식" href="sql_expression.html"/>
        <link rel="prev" title="데이터 삽입: INSERT (OVERWRITE) INTO" href="insert.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="fa fa-home"> Apache Tajo</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Apache Tajo란?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">시작하기</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html#id2">준비 사항</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html#id3">다운로드 및 소스코드 풀기</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html#id5">소스코드 빌드</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html#id6">로컬 클러스터 셋업</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html#id7">첫 질의 실행</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../configuration.html">설정</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../configuration/preliminary.html">준비</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/cluster_setup.html">클러스터 구성</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/tajo_master_configuration.html">Tajo Master Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/worker_configuration.html">워커(Worker) 설정</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/catalog_configuration.html">카탈로그 설정</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/ha_configuration.html">타조 마스터 고 가용성</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/service_config_defaults.html">클러스터 서비스 설정 기본값</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/tajo-site-xml.html">tajo-site.xml 파일</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/catalog-site-xml.html">catalog-site.xml 파일</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tsql.html">타조 쉘 (TSQL)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tsql/meta_command.html">메타 명령</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tsql/dfs_command.html">HDFS 명령 실행법</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tsql/variables.html">세션 변수들</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tsql/admin_command.html">어드민 명령들</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tsql/intro.html">TSQL 소개</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tsql/single_command.html">단일 명령 실행</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tsql/execute_file.html">파일에 저장된 질의 실행</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tsql/background_command.html">백그라운드 프로세스로 실행</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../sql_language.html">SQL 언어 (Tajo 질의 언어)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="data_model.html">데이터 모델</a></li>
<li class="toctree-l2"><a class="reference internal" href="ddl.html">데이터 정의 언어 (DDL, Data Definition Language)</a></li>
<li class="toctree-l2"><a class="reference internal" href="insert.html">데이터 삽입: INSERT (OVERWRITE) INTO</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">질의하기</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql_expression.html">SQL 수식</a></li>
<li class="toctree-l2"><a class="reference internal" href="predicates.html">연산자</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../time_zone.html">타임존(Time Zone)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../time_zone.html#server-cluster-time-zone">서버 클러스터 타임존 (Server Cluster Time Zone)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../time_zone.html#table-time-zone">테이블 타임존 (Table Time Zone)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../time_zone.html#client-time-zone">클라이언트 타임존 (Client Time Zone)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../time_zone.html#time-zone-id">Time Zone ID</a></li>
<li class="toctree-l2"><a class="reference internal" href="../time_zone.html#id1">타임존 사용 예제</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">Functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../functions/math_func_and_operators.html">수학함수와 연산자들</a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/string_func_and_operators.html">문자열 함수와 연산자들</a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/datetime_func_and_operators.html">날짜 및 시간 함수와 연산자들</a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/network_func_and_operators.html">네트워크 함수와 연산자들</a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/json_func.html">JSON 함수</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../table_management.html">테이블 관리</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../table_management/table_overview.html">Apache Tajo 테이블 관리 개요</a></li>
<li class="toctree-l2"><a class="reference internal" href="../table_management/file_formats.html">파일 포맷</a></li>
<li class="toctree-l2"><a class="reference internal" href="../table_management/compression.html">압축</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../table_partitioning.html">테이블 파티셔닝</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../partitioning/intro_to_partitioning.html">파티셔닝 소개</a></li>
<li class="toctree-l2"><a class="reference internal" href="../partitioning/column_partitioning.html">컬럼 파티셔닝</a></li>
<li class="toctree-l2"><a class="reference internal" href="../partitioning/range_partitioning.html">범위 파티셔닝 (Range Partitioning)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../partitioning/hash_partitioning.html">해쉬 (Hash) 파티셔닝</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../index_overview.html">인덱스 (실험중)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../index/types.html">인덱스 타입</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index/how_to_use.html">인덱스 사용법</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index/future_work.html">향후 계획</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../backup_and_restore.html">백업 및 복원</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../backup_and_restore/catalog.html">카탈로그 백업 및 복원</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../hcatalog_integration.html">HCatalog 통합</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hbase_integration.html">HBase 통합</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../hbase_integration.html#id1">테이블 생성</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hbase_integration.html#id2">테이블 삭제</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hbase_integration.html#id3">삽입(덮어쓰기)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hbase_integration.html#id4">용례</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../swift_integration.html">OpenStack Swift 통합</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../swift_integration.html#swift">Swift 설정</a></li>
<li class="toctree-l2"><a class="reference internal" href="../swift_integration.html#hadoop">Hadoop 설정</a></li>
<li class="toctree-l2"><a class="reference internal" href="../swift_integration.html#tajo">Tajo 설정</a></li>
<li class="toctree-l2"><a class="reference internal" href="../swift_integration.html#id3">Swift에서의 질의</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../jdbc_driver.html">타조 JDBC 드라이버</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../jdbc_driver.html#id1">JDBC 드라이버 받는 법</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jdbc_driver.html#classpath">CLASSPATH 설정하기</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jdbc_driver.html#id18">JDBC 클라이언트 예제</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jdbc_driver.html#faq">FAQ</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tajo_client_api.html">Tajo 클라이언트 API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">주요문답</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Apache Tajo</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../sql_language.html">SQL 언어 (Tajo 질의 언어)</a> &raquo;</li>
      
    <li>질의하기</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/sql_language/queries.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="id1">
<h1>질의하기<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id2">
<h2>질의구문 개요<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">SELECT</span> <span class="p">[</span><span class="k">distinct</span> <span class="p">[</span><span class="k">all</span><span class="p">]]</span> <span class="o">*</span> <span class="o">|</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span> <span class="p">[[</span><span class="k">AS</span><span class="p">]</span> <span class="o">&lt;</span><span class="k">alias</span><span class="o">&gt;</span><span class="p">]</span> <span class="p">[,</span> <span class="p">...]</span>
  <span class="p">[</span><span class="k">FROM</span> <span class="o">&lt;</span><span class="k">table</span> <span class="n">reference</span><span class="o">&gt;</span> <span class="p">[[</span><span class="k">AS</span><span class="p">]</span> <span class="o">&lt;</span><span class="k">table</span> <span class="k">alias</span> <span class="n">name</span><span class="o">&gt;</span><span class="p">]</span> <span class="p">[,</span> <span class="p">...]]</span>
  <span class="p">[</span><span class="k">WHERE</span> <span class="o">&lt;</span><span class="n">condition</span><span class="o">&gt;</span><span class="p">]</span>
  <span class="p">[</span><span class="k">GROUP</span> <span class="k">BY</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span> <span class="p">[,</span> <span class="p">...]]</span>
  <span class="p">[</span><span class="k">HAVING</span> <span class="o">&lt;</span><span class="n">condition</span><span class="o">&gt;</span><span class="p">]</span>
  <span class="p">[</span><span class="k">ORDER</span> <span class="k">BY</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span> <span class="p">[</span><span class="k">ASC</span><span class="o">|</span><span class="k">DESC</span><span class="p">]</span> <span class="p">[</span><span class="k">NULL</span> <span class="k">FIRST</span><span class="o">|</span><span class="k">NULL</span> <span class="k">LAST</span><span class="p">]</span> <span class="p">[,</span> <span class="p">...]]</span>
</pre></div>
</div>
</div>
<div class="section" id="from">
<h2>FROM 절<a class="headerlink" href="#from" title="Permalink to this headline">¶</a></h2>
<p><em>개요</em></p>
<div class="highlight-sql"><div class="highlight"><pre><span class="p">[</span><span class="k">FROM</span> <span class="o">&lt;</span><span class="k">table</span> <span class="n">reference</span><span class="o">&gt;</span> <span class="p">[[</span><span class="k">AS</span><span class="p">]</span> <span class="o">&lt;</span><span class="k">table</span> <span class="k">alias</span> <span class="n">name</span><span class="o">&gt;</span><span class="p">]</span> <span class="p">[,</span> <span class="p">...]]</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">FROM</span></code> 절을 사용해 하나 이상의 테이블을 컴마로 구분하여 table reference위치에 지정할 수 있습니다.
테이블을 지정하기 위해서 스키마 상의 테이블 이름, 서브쿼리, 조인 테이블, 혹은 이들의 복잡한 조합을 사용할 수 있습니다.</p>
<div class="section" id="id3">
<h3>테이블과 테이블 별명<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>테이블 별명을 사용해 특정 테이블에 또다른 테이블 이름을 지정할 수 있습니다.
또한 질의의 일부분으로 부터 생성된 테이블에 대해서도 테이블 별명을 통해 임시로 이름을 지어줄 수 있습니다.</p>
<p>테이블 별명을 만들기 위해서는 아래와 같은 구문처럼 <code class="docutils literal"><span class="pre">AS</span></code> 를 사용해 주세요.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">FROM</span> <span class="n">table_reference</span> <span class="k">AS</span> <span class="k">alias</span>
</pre></div>
</div>
<p>또한 아래처럼 테이블 별명을 지정할 수도 있습니다.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">FROM</span> <span class="n">table_reference</span> <span class="k">alias</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">AS</span></code> 키워드를 사용하시지 않는다면 <em>alias</em> 위치에 어떠한 이름을 지정하셔도 괜찮습니다.</p>
<p>테이블 별명의 일반적인 사용 예는 아래의 예제처럼 매우 긴 테이블 이름에 짧은 테이블 별명을 지정해 주는 것입니다.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">long_table_name_1234</span> <span class="n">s</span> <span class="k">JOIN</span> <span class="n">another_long_table_name_5678</span> <span class="n">a</span> <span class="k">ON</span> <span class="n">s</span><span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="n">num</span><span class="p">;</span>
</pre></div>
</div>
<p>이제 여러분은 long_table_name_1234 라는 이름을 가진 테이블을 s 라는 테이블 별명만을 사용해 간단히 지정할 수 있습니다.</p>
</div>
<div class="section" id="id4">
<h3>조인된 테이블<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>Tajo는 모든 타입의 조인을 지원합니다!</p>
<div class="section" id="id5">
<h4>조인 타입<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<div class="section" id="cross-join">
<h5>Cross Join<a class="headerlink" href="#cross-join" title="Permalink to this headline">¶</a></h5>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">FROM</span> <span class="n">T1</span> <span class="k">CROSS</span> <span class="k">JOIN</span> <span class="n">T2</span>
</pre></div>
</div>
<p><em>Cartesian product</em> 라고도 불리는 Cross Join은 테이블 T1 과 테이블 T2 로부터 가능한 모든 조합의 row들을 결과로 출력합니다.</p>
<p><code class="docutils literal"><span class="pre">FROM</span> <span class="pre">T1</span> <span class="pre">CROSS</span> <span class="pre">JOIN</span> <span class="pre">T2</span></code> 구문은 <code class="docutils literal"><span class="pre">FROM</span> <span class="pre">T1,</span> <span class="pre">T2</span></code> 구문과 동일합니다.</p>
</div>
<div class="section" id="qualified-joins">
<h5>Qualified joins<a class="headerlink" href="#qualified-joins" title="Permalink to this headline">¶</a></h5>
<p>Qualified joins 은 조인조건을 지정해 줄 수도 있고,  암묵적인 조인 조건을 가지고 있을 수도 있습니다.
Inner/Outer/Natural 조인타입 모두가 qualified joins 으로 사용될 수 있습니다.
Natural join을 제외하고, <code class="docutils literal"><span class="pre">ON</span></code> 혹은 <code class="docutils literal"><span class="pre">USING</span></code> 절을 각 조인에 사용해 특별한 조인 조건을 지정해 줄 수 있습니다.
조인 조건은 반드시 하나이상의 boolean 수식을 포함하고 있어야 합니다. 또한 필터 조건만을 포함하고 있어도 됩니다.</p>
<p><strong>Inner Join</strong></p>
<div class="highlight-sql"><div class="highlight"><pre><span class="n">T1</span> <span class="p">[</span><span class="k">INNER</span><span class="p">]</span> <span class="k">JOIN</span> <span class="n">T2</span> <span class="k">ON</span> <span class="n">boolean_expression</span>
<span class="n">T1</span> <span class="p">[</span><span class="k">INNER</span><span class="p">]</span> <span class="k">JOIN</span> <span class="n">T2</span> <span class="k">USING</span> <span class="p">(</span><span class="k">join</span> <span class="k">column</span> <span class="n">list</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">INNER</span></code> 키워드는 기본으로 사용되는 조인타입이며 inner join을 사용할 때 <code class="docutils literal"><span class="pre">INNER</span></code> 키워드는 생략될 수 있습니다.</p>
<p><strong>Outer Join</strong></p>
<div class="highlight-sql"><div class="highlight"><pre><span class="n">T1</span> <span class="p">(</span><span class="k">LEFT</span><span class="o">|</span><span class="k">RIGHT</span><span class="o">|</span><span class="k">FULL</span><span class="p">)</span> <span class="k">OUTER</span> <span class="k">JOIN</span> <span class="n">T2</span> <span class="k">ON</span> <span class="n">boolean_expression</span>
<span class="n">T1</span> <span class="p">(</span><span class="k">LEFT</span><span class="o">|</span><span class="k">RIGHT</span><span class="o">|</span><span class="k">FULL</span><span class="p">)</span> <span class="k">OUTER</span> <span class="k">JOIN</span> <span class="n">T2</span> <span class="k">USING</span> <span class="p">(</span><span class="k">join</span> <span class="k">column</span> <span class="n">list</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">LEFT</span></code>, <code class="docutils literal"><span class="pre">RIGHT</span></code>, 혹은 <code class="docutils literal"><span class="pre">FULL</span></code> 키워드 중 하나를 반드시 사용해 outer join 의 정확한 조인타입을 지정해 주어야 합니다.
Outer join의 조인 조건은 참조된 테이블의 조인 조건에 따라 다르게 적용됩니다.
Outer join에 대해 더 자세한 정보를 원하시면 <a class="reference external" href="http://www.ibm.com/developerworks/data/library/techarticle/purcell/0201purcell.html">Advanced outer join constructs</a> 를 참조해 주세요.</p>
<p><strong>Natural Join</strong></p>
<div class="highlight-sql"><div class="highlight"><pre><span class="n">T1</span> <span class="k">NATURAL</span> <span class="k">JOIN</span> <span class="n">T2</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">NATURAL</span></code> 키워드는  <code class="docutils literal"><span class="pre">USING</span></code> 키워드의 짧은 형태입니다. 이는 <code class="docutils literal"><span class="pre">USING</span></code> 키워드를 사용했을 때 두 테이블이 가진 모든 공통된 컬럼을 지정한 경우와
동일한 의미를 지닙니다. 동일한 컬럼들은 출력 테이블에 중복되지 않고 한번만 나타납니다.
만약 동일한 컬럼이 없다면, <code class="docutils literal"><span class="pre">NATURAL</span></code> 조인은 <code class="docutils literal"><span class="pre">CROSS</span> <span class="pre">JOIN</span></code> 과 동일하게 동작합니다.</p>
<p><strong>Subqueries</strong></p>
<p>서브쿼리를 사용해 파생테이블을 지정할 수 있습니다. 서브쿼리는 아래의 예제처럼 괄호를 사용해 SQL 구문을 포함하는데 필요하며, 테이블 별명을 사용해 파생 테이블에 접근 할 수 있습니다.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">FROM</span> <span class="p">(</span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">table1</span><span class="p">)</span> <span class="k">AS</span> <span class="n">alias_name</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="where">
<h2>Where 절<a class="headerlink" href="#where" title="Permalink to this headline">¶</a></h2>
<p>Where 절은 아래와 같은 형태로 사용됩니다.</p>
<p><em>개요</em></p>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">WHERE</span> <span class="n">search_condition</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">search_condition</span></code> 은 모든 boolean 수식을 포함할 수 있습니다.
추가적인 조건절을 알고 싶으시다면, <a class="reference internal" href="predicates.html"><em>연산자</em></a> 을 참조해 주세요.</p>
</div>
<div class="section" id="groupby-having">
<h2>Groupby 와 Having 절<a class="headerlink" href="#groupby-having" title="Permalink to this headline">¶</a></h2>
<p><em>개요</em></p>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">SELECT</span> <span class="n">select_list</span>
    <span class="k">FROM</span> <span class="p">...</span>
    <span class="p">[</span><span class="k">WHERE</span> <span class="p">...]</span>
    <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">grouping_column_reference</span> <span class="p">[,</span> <span class="n">grouping_column_reference</span><span class="p">]...</span>
    <span class="p">[</span><span class="k">HAVING</span> <span class="n">boolean_expression</span><span class="p">]</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">WHERE</span></code> 절을 통과한 row들은 filter <code class="docutils literal"><span class="pre">GROUP</span> <span class="pre">BY</span></code> 절에 명시된 grouping의 대상이 될 수도 있습니다.
Grouping 은 동일한 값을 가진 row의 집합을 하나의 그룹으로 만들고, 집계 함수를 사용해 동일 그룹에 포함된 row들을 계산합니다.
<code class="docutils literal"><span class="pre">HAVING</span></code> 절은 <code class="docutils literal"><span class="pre">GROUP</span> <span class="pre">BY</span></code> 절과 함께 사용되며, 조건에 맞지 않는 row들을 제거합니다.</p>
<p><code class="docutils literal"><span class="pre">grouping_column_reference</span></code> 위치에 특정한 컬럼을 지정할 수도 있고, 스칼라 함수와 사칙 연산을 포함한 복잡한 수식도 포함할 수 있습니다.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">SELECT</span> <span class="n">l_orderkey</span><span class="p">,</span> <span class="k">SUM</span><span class="p">(</span><span class="n">l_quantity</span><span class="p">)</span> <span class="k">AS</span> <span class="n">quantity</span> <span class="k">FROM</span> <span class="n">lineitem</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">l_orderkey</span><span class="p">;</span>

<span class="k">SELECT</span> <span class="n">substr</span><span class="p">(</span><span class="n">l_shipdate</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span> <span class="k">as</span> <span class="k">year</span><span class="p">,</span> <span class="k">SUM</span><span class="p">(</span><span class="n">l_orderkey</span><span class="p">)</span> <span class="k">AS</span> <span class="n">total2</span> <span class="k">FROM</span> <span class="n">lineitem</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">substr</span><span class="p">(</span><span class="n">l_shipdate</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">);</span>
</pre></div>
</div>
<p>만약 SQL 수식이 <code class="docutils literal"><span class="pre">GROUP</span> <span class="pre">BY</span></code> 절을 포함한다면, select 구문은 <code class="docutils literal"><span class="pre">grouping_column_reference</span></code> 혹은 집계 함수들의 리스트를 포함하고 있어야 합니다.
예를 들어, 아래의 예제는 <code class="docutils literal"><span class="pre">GROUP</span> <span class="pre">BY</span></code> 절에  <code class="docutils literal"><span class="pre">l_orderkey</span></code> 컬럼이 포함되어 있지 않기 때문에 올바른 질의가 아닙니다.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">SELECT</span> <span class="n">l_orderkey</span><span class="p">,</span> <span class="n">l_partkey</span><span class="p">,</span> <span class="k">SUM</span><span class="p">(</span><span class="n">l_orderkey</span><span class="p">)</span> <span class="k">AS</span> <span class="n">total</span> <span class="k">FROM</span> <span class="n">lineitem</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">l_partkey</span><span class="p">;</span>
</pre></div>
</div>
<p>집계 함수는 <code class="docutils literal"><span class="pre">DISTINCT</span></code> 키워드를 포함할 수 있습니다.
이를 포함한 집계 함수들은 집계 수식에 포함된 특정 컬럼에 대해 중복되지 않은 유일한 값 하나씩을 집계 함수의 입력값으로 사용해 합계를 계산합니다.
이에 대한 예제가 아래에 있습니다.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">SELECT</span> <span class="n">l_partkey</span><span class="p">,</span> <span class="k">COUNT</span><span class="p">(</span><span class="k">distinct</span> <span class="n">l_quantity</span><span class="p">),</span> <span class="k">SUM</span><span class="p">(</span><span class="k">distinct</span> <span class="n">l_extendedprice</span><span class="p">)</span> <span class="k">AS</span> <span class="n">total</span> <span class="k">FROM</span> <span class="n">lineitem</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">l_partkey</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="orderby-limit">
<h2>Orderby 와 Limit 절<a class="headerlink" href="#orderby-limit" title="Permalink to this headline">¶</a></h2>
<p><em>개요</em></p>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">FROM</span> <span class="p">...</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="o">&lt;</span><span class="n">sort_expr</span><span class="o">&gt;</span> <span class="p">[(</span><span class="k">ASC</span><span class="o">|</span><span class="k">DESC</span><span class="p">)]</span> <span class="p">[</span><span class="k">NULL</span> <span class="p">(</span><span class="k">FIRST</span><span class="o">|</span><span class="k">LAST</span><span class="p">)</span> <span class="p">[,...]</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">sort_expr</span></code> 키워드는 컬럼 이름,  컬럼의 별명, 그리고 복잡한 수식을 포함할 수 있습니다.
<code class="docutils literal"><span class="pre">ASC</span></code> 키워드는 <code class="docutils literal"><span class="pre">sort_expr</span></code> 값이 오름차순으로 정렬될 것임을 의미합니다.
<code class="docutils literal"><span class="pre">DESC</span></code> 키워드는 반대로 <code class="docutils literal"><span class="pre">sort_expr</span></code> 값이 내림차순으로 정렬될 것임을 의미합니다.
<code class="docutils literal"><span class="pre">ASC</span></code> 가 기본 정렬순서로 사용됩니다.</p>
<p><code class="docutils literal"><span class="pre">NULLS</span> <span class="pre">FIRST</span></code> 와 <code class="docutils literal"><span class="pre">NULLS</span> <span class="pre">LAST</span></code> 옵션은 정렬 연산 중 null값 이 non-null값 전과 후에 등장했을때 null값을 어떻게 처리할 지를 결정합니다.
기본적으로, null 값은 어떤 non-null 값 보다 크게 처리됩니다.
즉, <code class="docutils literal"><span class="pre">NULLS</span> <span class="pre">FIRST</span></code> 는 <code class="docutils literal"><span class="pre">DESC</span></code> 정렬 순서의 기본 동작방식이고, <code class="docutils literal"><span class="pre">NULLS</span> <span class="pre">LAST</span></code> 의 경우는 반대입니다.</p>
</div>
<div class="section" id="window">
<h2>Window 함수<a class="headerlink" href="#window" title="Permalink to this headline">¶</a></h2>
<p>Window 함수는 어떤 window 프레임에 속하는 여러 테이블의 row들을 대상으로 계산을 수행합니다.</p>
<p><em>개요</em></p>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">SELECT</span> <span class="p">....,</span> <span class="n">func</span><span class="p">(</span><span class="n">param</span><span class="p">)</span> <span class="n">OVER</span> <span class="p">([</span><span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">partition</span><span class="o">-</span><span class="n">expr</span> <span class="p">[,</span> <span class="p">...]]</span> <span class="p">[</span><span class="k">ORDER</span> <span class="k">BY</span> <span class="n">sort</span><span class="o">-</span><span class="n">expr</span> <span class="p">[,</span> <span class="p">...]]),</span> <span class="p">....,</span>  <span class="k">FROM</span>
</pre></div>
</div>
<p>OVER 키워드 내의 PARTITION BY 키워드는 PARTITION BY 수식들에 명시된 값에서 같은 값을 지닌 row들을 여러개의 그룹, 혹은 파티션으로 구분하도록 합니다.
각각의 row들에 대해서 현재 row와 같은 파티션 내에 속하는 row들에 대해 window 함수를 사용해 원하는 연산을 수행합니다.</p>
<p>아래에 window 함수들에 대한 몇몇 간단한 예제를 설명하였습니다.</p>
<div class="section" id="id6">
<h3>예제<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>여러개의 window 함수들은 SQL 구문에 아래와 같이 사용될 수 있습니다.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">SELECT</span> <span class="n">l_orderkey</span><span class="p">,</span> <span class="k">sum</span><span class="p">(</span><span class="n">l_discount</span><span class="p">)</span> <span class="n">OVER</span> <span class="p">(</span><span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">l_orderkey</span><span class="p">),</span> <span class="k">sum</span><span class="p">(</span><span class="n">l_quantity</span><span class="p">)</span> <span class="n">OVER</span> <span class="p">(</span><span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">l_orderkey</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">LINEITEM</span><span class="p">;</span>
</pre></div>
</div>
<p>만약 <code class="docutils literal"><span class="pre">OVER()</span></code> 절이 아래와 같이 비어있다면, 모든 테이블의 row들을 하나의 window 프레임에 포함되도록 합니다.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">SELECT</span> <span class="n">salary</span><span class="p">,</span> <span class="k">sum</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="n">OVER</span> <span class="p">()</span> <span class="k">FROM</span> <span class="n">empsalary</span><span class="p">;</span>
</pre></div>
</div>
<p>또한, <code class="docutils literal"><span class="pre">ORDER</span> <span class="pre">BY</span></code> 절의 경우 아래와 같이 <code class="docutils literal"><span class="pre">PARTITION</span> <span class="pre">BY</span></code> 절 없이도 사용될 수 있습니다.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">SELECT</span> <span class="n">salary</span><span class="p">,</span> <span class="k">sum</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="n">OVER</span> <span class="p">(</span><span class="k">ORDER</span> <span class="k">BY</span> <span class="n">salary</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">empsalary</span><span class="p">;</span>
</pre></div>
</div>
<p>이와 더불어, 모든 수식과 집계 함수들은 아래의 예제 처럼 <code class="docutils literal"><span class="pre">ORDER</span> <span class="pre">BY</span></code> 내에서 사용될 수 있습니다.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">select</span>
  <span class="n">l_orderkey</span><span class="p">,</span>
  <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">as</span> <span class="n">cnt</span><span class="p">,</span>
  <span class="n">row_number</span><span class="p">()</span> <span class="n">over</span> <span class="p">(</span><span class="n">partition</span> <span class="k">by</span> <span class="n">l_orderkey</span> <span class="k">order</span> <span class="k">by</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">desc</span><span class="p">)</span>
  <span class="n">row_num</span>
<span class="k">from</span>
  <span class="n">lineitem</span>
<span class="k">group</span> <span class="k">by</span>
  <span class="n">l_orderkey</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">현제, Tajo는 하나의 SQL 수식에 여러개의 다른 파티션 구문에 대해 지원하고 있지 않습니다.</p>
</div>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="sql_expression.html" class="btn btn-neutral float-right" title="SQL 수식"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="insert.html" class="btn btn-neutral" title="데이터 삽입: INSERT (OVERWRITE) INTO"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Apache Tajo Team.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.8.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>